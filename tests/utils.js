const fs = require("fs"); const path = require("path"); const config = require("./config"); function ensureDir(dirPath) { if (!fs.existsSync(dirPath)) { fs.mkdirSync(dirPath, { recursive: true }); } } module.exports = { takeScreenshot: async function(page, name) { const screenshotsDir = path.join(__dirname, "..", config.screenshotsDir); ensureDir(screenshotsDir); const screenshotPath = path.join(screenshotsDir, `${name}.png`); await page.screenshot({ path: screenshotPath, fullPage: true }); console.log(`Screenshot saved: ${screenshotPath}`); return screenshotPath; }, log: function(message) { console.log(`[${new Date().toISOString()}] ${message}`); } };
